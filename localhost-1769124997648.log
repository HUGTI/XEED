// Get the game instance
const game = window.__gameInstance;

// Log all properties
console.dir(game);

// Or search for relevant properties
console.log(Object.keys(game));

// Look for properties like:
// - cups
// - balls
// - state
// - gameState
// - positions
// - shuffle
VM447:5 e
VM447:8 (15)Â ['_events', '_eventsCount', 'preferredTextureResolution', 'app', 'device', 'loader', 'sceneParser', 'audioManager', 'isGameReady', 'spineStorage', 'resultPopup', 'background', 'thimbles', 'light', 'info']
undefined
// Try these common patterns:

// Pattern 1: Direct state access
console.log("Game state:", game.state);
console.log("Cups:", game.cups);
console.log("Balls:", game.balls);

// Pattern 2: Search recursively
function searchForBallPositions(obj, path = "") {
    for (let key in obj) {
        if (typeof obj[key] === 'object' && obj[key] !== null) {
            searchForBallPositions(obj[key], path + "." + key);
        } else if (key.toLowerCase().includes("ball") || 
                   key.toLowerCase().includes("cup")) {
            console.log(path + "." + key + ":", obj[key]);
        }
    }
}
searchForBallPositions(game, "game");

// Pattern 3: Check game mode first
const mode = game.mode || game.gameMode || game.currentMode;
console.log("Game mode:", mode);

// Pattern 4: Monitor during mixing
// If you can trigger the mix and capture state:
const originalMix = game.mixCups || game.shuffle;
game.mixCups = function(...args) {
    console.log("Before mixing:", this.getBallPositions?.());
    const result = originalMix.apply(this, args);
    console.log("After mixing:", this.getBallPositions?.());
    return result;
};
VM451:4 Game state: undefined
VM451:5 Cups: undefined
VM451:6 Balls: undefined
VM451:9 Uncaught RangeError: Maximum call stack size exceeded
    at searchForBallPositions (<anonymous>:9:32)
    at searchForBallPositions (<anonymous>:12:13)
    at searchForBallPositions (<anonymous>:12:13)
    at searchForBallPositions (<anonymous>:12:13)
    at searchForBallPositions (<anonymous>:12:13)
    at searchForBallPositions (<anonymous>:12:13)
    at searchForBallPositions (<anonymous>:12:13)
    at searchForBallPositions (<anonymous>:12:13)
    at searchForBallPositions (<anonymous>:12:13)
    at searchForBallPositions (<anonymous>:12:13)
searchForBallPositions @ VM451:9
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
searchForBallPositions @ VM451:12
// 1. Find the mixing/shuffling function
const mixingFunctions = [];
for (let key in game) {
    if (typeof game[key] === 'function') {
        if (key.toLowerCase().includes('mix') || 
            key.toLowerCase().includes('shuffle') ||
            key.toLowerCase().includes('swap')) {
            mixingFunctions.push(key);
        }
    }
}
console.log("Possible mixing functions:", mixingFunctions);

// 2. Hook one likely function
const originalFunc = game.mixCups || game.shuffle;
if (originalFunc) {
    game.mixCups = function(...args) {
        // Call original
        const result = originalFunc.apply(this, args);
        
        // Extract ball positions after mixing
        let ballPositions = null;
        
        // Try different access patterns
        if (this.cups) {
            ballPositions = this.cups.map((cup, index) => ({
                cup: index,
                hasBall: cup.hasBall || cup.ball || false
            }));
        }
        
        // Or if there's a balls array
        if (this.balls) {
            ballPositions = this.balls.map(ball => ball.position);
        }
        
        console.log("ðŸŽ¯ BALL POSITIONS AFTER MIXING:", ballPositions);
        window.__lastBallPositions = ballPositions; // Save for later
        
        return result;
    };
}
VM455:12 Possible mixing functions: []
undefined
// Create a proxy to monitor all property changes
const proxyHandler = {
    set(target, property, value) {
        console.log(`Property ${property} changed to:`, value);
        
        // Check if this property might contain ball positions
        if (property.toString().toLowerCase().includes('ball') ||
            property.toString().toLowerCase().includes('position')) {
            console.log("âš ï¸ BALL-RELATED CHANGE:", property, value);
        }
        
        target[property] = value;
        return true;
    }
};

window.__gameInstance = new Proxy(game, proxyHandler);
Proxy(e)Â {_events: n, _eventsCount: 1, preferredTextureResolution: 1, app: e, device: e,Â â€¦}
function findBallPositions(game) {
    const results = {};
    
    // Method 1: Direct property access
    const candidates = ['cups', 'balls', 'state', 'gameState', 'positions'];
    candidates.forEach(key => {
        if (game[key]) {
            console.log(`Found ${key}:`, game[key]);
            results[key] = game[key];
        }
    });
    
    // Method 2: Search for boolean arrays (likely [true, false, false])
    function findBooleanArrays(obj, path = '') {
        if (Array.isArray(obj) && obj.length === 3) {
            if (obj.every(item => typeof item === 'boolean')) {
                console.log(`Found boolean array at ${path}:`, obj);
                results.booleanArray = { path, value: obj };
            }
        }
        if (obj && typeof obj === 'object') {
            for (let key in obj) {
                if (obj.hasOwnProperty(key)) {
                    findBooleanArrays(obj[key], path + '.' + key);
                }
            }
        }
    }
    findBooleanArrays(game, 'game');
    
    // Method 3: Check for current cup states
    if (game.cups && Array.isArray(game.cups)) {
        const cupStates = game.cups.map((cup, i) => ({
            cup: i,
            hasBall: cup.hasBall || cup.containsBall || cup.ball || false
        }));
        console.log("Cup states:", cupStates);
        results.cupStates = cupStates;
    }
    
    return results;
}

// Run it
const ballInfo = findBallPositions(window.__gameInstance);
console.log("ðŸŽ¯ FINAL BALL POSITION INFO:", ballInfo);
VM463:23 Uncaught TypeError: obj.hasOwnProperty is not a function
    at findBooleanArrays (<anonymous>:23:25)
    at findBooleanArrays (<anonymous>:24:21)
    at findBallPositions (<anonymous>:29:5)
    at <anonymous>:45:18
findBooleanArrays @ VM463:23
findBooleanArrays @ VM463:24
findBallPositions @ VM463:29
(anonymous) @ VM463:45
// Save original state
const originalState = JSON.stringify(window.__gameInstance);

// Trigger a reshuffle (if possible)
if (window.__gameInstance.reshuffle || window.__gameInstance.reset) {
    window.__gameInstance.reshuffle();
    
    // Immediately check positions
    setTimeout(() => {
        console.log("After reshuffle:", 
            findBallPositions(window.__gameInstance));
    }, 100);
}
VM467:2 Uncaught TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'n'
    |     property 'onSelectThimble' -> object with constructor 'o'
    |     property 'context' -> object with constructor 'e'
    --- property '_events' closes the circle
    at JSON.stringify (<anonymous>)
    at <anonymous>:2:28
(anonymous) @ VM467:2
